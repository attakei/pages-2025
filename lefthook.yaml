---
templates:
  run_python: 'uv run'

remotes:
  # TODO: Uncomment after apply current fixes
  # - git_url: 'https://github.com/attakei/workspace-configs'
  #   ref: 'v0.5.1'
  #   configs:
  #     - 'projects/python/lefthook-astral.yaml'
  - git_url: 'https://github.com/attakei/workspace-configs'
    ref: 'v0.5.1'
    configs:
      - 'projects/sphinx-doc/lefthook.yaml'

pre-commit:
  parallel: true
  jobs:
    - name: 'Ruff'
      glob: '*.py'
      exclude: 'contents/'
      group:
        parallel: false
        jobs:
          - name: 'format'
            run: '{run_python} ruff format {staged_files}'
          - name: 'lint'
            run: '{run_python} ruff check --fix {staged_files}'
  commands:
    ty:
      glob: '*.py'
      exclude: 'contents/'
      run: '{run_python} ty check {staged_files}'
    textlint:
      glob: '*.rst'
      run: 'task textlint -- {staged_files}'
