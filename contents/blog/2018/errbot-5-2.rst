====================================
Errbot 5.2.0の更新内容を雑にまとめる
====================================

.. post:: 2018-05-28
   :category: Tech
   :tags: Python,Errbot,OSS,

動かしているBotがアップデート案内を出してきたので、リリース後少し経つが更新内容の整理をしてみようと思った。

今の時点では、積極的に引き上げる必要はなさそうにも思える。

機能系
======

* ``ChatRoom.room_join`` が、複数の引数を受け付けるように

  * 用途としては、Roomへの参加にパスワードが必要なケースに対して、 パスワードを渡せるようになった。
  * | botの動きをBotに限定したほうが楽なケースがあって条件を満たせば有用かもしれない。
    | けど、今の所SlackとDiscordを使ってて、必要にはなってない。

* ``config.py`` からログ出力のフォーマットを変えられるように

  * ちょっと現時点では使い所を見いだせない。
  * もしかしたら、加工しやすいフォーマットに設定しておいて、fluentでログをリレーするとかは楽になるのかもしれない？

* ``Sentry`` 対応

  * 現状の利用環境下では使いみち全くなし

* ``HipChat`` でファイル送信ができるように

  * ``slack`` プラグインなどにも使われている、 ``send_stream_request`` をHipChatでも使えるように実装されたもの。
  * HipChatを使ってないので、使いみち全くなし。

* ``Errbot-Flow`` を使用している人の現状が視覚化されるように

  * 「誰が」「どのflowの」「どのステップにいて」「次にどのステップを選べるか」を見やすくレスポンスするように。
  * もうちょっとしたら本格的にFlowに取り組んでみたいので、ヒント代わりに覚えていきたい。

* ``help`` コマンドがプラグイン内でアルファベット順に

  * 多分だけど、以前のバージョンではコマンド一覧のリスト作成時に、クラス内で定義された順になってたんじゃないだろうか。
  * そういった意味では、 **確実に** アルファベット順になるのは、統一感があっていいと思う。

* ``slackclient`` でProxyが利用可能に

  * クローズドな領域にErrbotを置くならいるんだろうなぁ。という感想

不具合改修系
============

* バックアップからのリストアにあった不具合を改修
* PluginManagerがCORE_PLUGINSに含まれていないcore_pluginを見ないように？する
* ``repos search`` コマンドの処理をサーバー側に合わせる
* Textバックエンドの改修
* Slackバックエンドの改修
