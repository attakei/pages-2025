=======================================================
GitLabにあるブログをNetlifyにデプロイするようにしてみる
=======================================================

.. post:: 2016-09-17
   :category: Tech
   :tags: GitLab,Netlify,

このブログの管理要素をあれこれ手直しして、

* `GitLab <https://gitlab.com>`_ のプライベートリポジトリで管理。
* 生成した内容を `Netlify <https://www.netlify.com/>`_ で公開。

という形式に切り替えてみたので、ざっくりと振り返り。

利用しているサービス
====================

GitLab
------

`GitHub <https://github.com>`_ と同様のコード共有サービス。
社内の非業務系のコード置き場にCE版を使っていたのがきっかけで触ったりしてたのだが、気づいたらgitlab.comがえらく進化していたので、最近はBitbucketからちょこちょこ置き換えて使ってる。

自分が利用している範囲での、他サービスとの比較だと

* プライベートリポジトリが(今の所)制約なく無料・無制限で作成できる
* サービス内にCIサービスが普通に組み込まれている(Gitlab-CI)
* Dockerプライベートレジストリーがついている

というあたりが強力なイメージ。githubあたりと比べるとサーバー全体が若干虚弱なようで気になっている。

Netlify
-------

静的サイトのホスティングサービス。gitlabなどのリポジトリと連携して、push -> build -> deployまでを自動でやってくれる。
独自ドメインには当然のごとく対応している上に、Let's Encryptによる高速なHTTPSサイト化までを簡単にサポートしてくれるため、非常に使い勝手がいい。

`Qiitaに紹介記事を書いている人 <http://qiita.com/TakahiRoyte/items/b7c4d1581df1a17a93fb>`_ がいるので詳しくはそちらを。

どんな構成にしているのか
========================

セクション分けするほど細かい何かをしている分けではないのだが、

* Gitlabにベースのコードをホスティング(pelican ベース)
* Netlify側でこのリポジトリをビルド対象として設定

  * masterブランチのみが対象
  * ビルドとして、 :code:`pelican publish` で公開用リソースの生成
  * 出力先の中身をデプロイ（コードをデプロイしない）

となっている。

雑に触っただけなのだが、便利なので気に入った。

ちょっと前までは、github pages使ってたのだけれど、どこかのCIサーバーでビルドするとかしないといけないのがやや面倒だったのでこれは助かる。
おまけでHTTPS化したのでなんか気分がいい。
